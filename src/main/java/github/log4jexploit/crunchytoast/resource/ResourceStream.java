/*
 * Copyright (c) 2022-2024 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.resource;

import github.log4jexploit.crunchytoast.http.util.Http;
import github.log4jexploit.crunchytoast.http.util.UncheckedIOReader;

import java.io.InputStream;

public class ResourceStream implements Resource {

    private final InputStream stream;
    private final Http.ContentType contentType;

    public ResourceStream(InputStream stream, Http.ContentType contentType) {
        this.stream = stream;
        this.contentType = contentType;
    }

    @Override
    public long getSize() {
        return -1;
    }

    @Override
    public Http.ContentType getContentType() {
        return this.contentType;
    }

    @Override
    public byte[] getData() {
        UncheckedIOReader reader = new UncheckedIOReader(stream);
        return reader.readAllBytes();
    }

    @Override
    public byte[] getDataRange(long offset, int length) {
        return new byte[0];
    }

    @Override
    public InputStream getDataAsStream() {
        return this.stream;
    }

    @Override
    public boolean isSizeKnown() {
        return false;
    }
}

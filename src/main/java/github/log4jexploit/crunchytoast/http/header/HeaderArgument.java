/*
 * Copyright (c) 2022-2024 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.http.header;

import java.util.ArrayList;

public final class HeaderArgument {

    private final ArrayList<Argument> values = new ArrayList<>();


    public HeaderArgument() {

    }

    public HeaderArgument(String argument) {
        String[] split = argument.split(",");

        for(String anySplit : split) {
            String value = anySplit.trim();
            if(value.contains("=")) {
                String[] pair = value.split("=");
                values.add(new ArgumentPair(pair[0], pair[1]));
            } else {
                values.add(new ArgumentValue(value));
            }
        }
    }


    public void add(String value) {
        this.values.add(new ArgumentValue(value));
    }

    public void add(String key, String value) {
        this.values.add(new ArgumentPair(key, value));
    }

    public ArrayList<Argument> getValues() {
        return new ArrayList<>(values);
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();

        for(Argument value : values)
            builder.append(", ").append(value);

        if(!values.isEmpty())
            builder.delete(0, 2);

        return builder.toString();
    }
}

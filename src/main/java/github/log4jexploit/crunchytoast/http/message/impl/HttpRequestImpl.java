/*
 * Copyright (c) 2024 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.http.message.impl;

import github.log4jexploit.crunchytoast.general.Client;
import github.log4jexploit.crunchytoast.http.message.body.inf.IBodyContentReader;
import github.log4jexploit.crunchytoast.http.message.body.inf.IBodyContentWriter;
import github.log4jexploit.crunchytoast.http.message.inf.HttpRequest;
import github.log4jexploit.crunchytoast.http.message.inf.Strategy;
import github.log4jexploit.crunchytoast.http.util.Http;
import github.log4jexploit.crunchytoast.strategy.StrategyRequestReceiveImpl;
import github.log4jexploit.crunchytoast.strategy.StrategyRequestSendImpl;

// Coded by Zadex at 17/10/2022

public final class HttpRequestImpl extends HttpMessageImpl implements HttpRequest {

    private Http.RequestType requestType;
    private String requestURI;
    private Strategy.Request strategy;


    public HttpRequestImpl() {
        this.requestType = Http.RequestType.GET;
        this.requestURI = "/";
    }


    @Override
    public IBodyContentReader receive(Client client) {
        this.client = client;
        this.strategy = new StrategyRequestReceiveImpl();
        this.strategy.initialize(this.client, this);
        this.strategy.execute();
        return super.receive(client);
    }

    @Override
    public IBodyContentWriter send(Client client) {
        this.client = client;
        this.strategy = new StrategyRequestSendImpl();
        this.strategy.initialize(this.client, this);
        this.strategy.execute();
        return super.send(this.client);
    }

    @Override
    public Http.RequestType getRequestType() {
        return requestType;
    }

    @Override
    public void setRequestType(Http.RequestType requestType) {
        this.requestType = requestType;
    }

    @Override
    public String getRequestURI() {
        return requestURI;
    }

    @Override
    public void setRequestURI(String requestURI) {
        this.requestURI = requestURI;
    }
}

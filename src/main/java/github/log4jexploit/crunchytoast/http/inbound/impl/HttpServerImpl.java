/*
 * Copyright (c) 2022-2025 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.http.inbound.impl;

import javax.net.ServerSocketFactory;
import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.ServerSocket;

public final class HttpServerImpl extends HttpServer {

    public HttpServerImpl(int port) {
        this(port, "127.0.0.1");
    }

    public HttpServerImpl(int port, String bindingIP) {
        super(port, bindingIP);
    }


    void createServerSocket() throws IOException {
        if(this.bindingIP == null) {
            this.serverSocket = new ServerSocket(this.port);
        } else {
            InetSocketAddress address = new InetSocketAddress(this.bindingIP, this.port);
            this.serverSocket = ServerSocketFactory.getDefault().createServerSocket(this.port,-1, address.getAddress());
        }
    }
}

/*
 * Copyright (c) 2022-2025 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.http.inbound.impl;

import javax.net.ServerSocketFactory;
import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.ServerSocket;

@SuppressWarnings("unused")
public final class HttpServerImpl extends HttpServer {

    public HttpServerImpl(int port) {
        this(port, "127.0.0.1", 4);
    }

    public HttpServerImpl(int port, String bindingIP, int workerThreadLimit) {
        super(port, bindingIP, workerThreadLimit);
    }


    protected ServerSocket createServerSocket() throws IOException {
        if(this.getBindingIP() == null) {
            return new ServerSocket(this.getPort());
        } else {
            InetSocketAddress address = new InetSocketAddress(this.getBindingIP(), this.getPort());
            return ServerSocketFactory.getDefault().createServerSocket(this.getPort(),-1, address.getAddress());
        }
    }
}

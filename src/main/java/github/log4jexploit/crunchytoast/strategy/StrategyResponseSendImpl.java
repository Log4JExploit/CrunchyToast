/*
 * Copyright (c) 2022-2025 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.strategy;

import github.log4jexploit.crunchytoast.http.message.inf.HttpResponse;
import github.log4jexploit.crunchytoast.http.util.UncheckedIOWriter;
import github.log4jexploit.crunchytoast.server.Client;

public class StrategyResponseSendImpl implements Strategy.Response {

    private UncheckedIOWriter writer;
    private HttpResponse response;

    @Override
    public void initialize(Client client, HttpResponse response) {
        this.writer = new UncheckedIOWriter(client.getOutputStream());
        this.response = response;
    }

    @Override
    public void execute() {
        String builder = this.response.getProtocol() + " " + this.response.getResponseCode().getNumber();
        this.writer.writeLine(builder);
        this.writer.flush();
    }
}

/*
 * Copyright (c) 2024 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.strategy;

import github.log4jexploit.crunchytoast.http.util.UncheckedIOWriter;
import github.log4jexploit.crunchytoast.general.Client;
import github.log4jexploit.crunchytoast.http.message.inf.HttpResponse;
import github.log4jexploit.crunchytoast.http.message.inf.Strategy;

public class StrategyResponseSendImpl implements Strategy.Response {

    private UncheckedIOWriter writer;
    private HttpResponse response;

    @Override
    public void initialize(Client client, HttpResponse response) {
        this.writer = new UncheckedIOWriter(client.getOutputStream());
        this.response = response;
    }

    @Override
    public void execute() {
        StringBuilder builder = new StringBuilder();
        builder.append(this.response.getProtocol()).append(" ");
        builder.append(this.response.getResponseCode());
        this.writer.writeLine(builder.toString());
        this.writer.flush();
    }
}

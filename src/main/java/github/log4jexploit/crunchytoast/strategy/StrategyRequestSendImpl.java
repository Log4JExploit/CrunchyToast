/*
 * Copyright (c) 2024 CrunchyToast by Log4JExploit
 * Do you keep my non-compiled source code?
 * Then keep this comment.  (View the license)
 */

package github.log4jexploit.crunchytoast.strategy;

import github.log4jexploit.crunchytoast.http.util.UncheckedIOWriter;
import github.log4jexploit.crunchytoast.general.Client;
import github.log4jexploit.crunchytoast.http.message.inf.HttpRequest;
import github.log4jexploit.crunchytoast.http.message.inf.Strategy;

public class StrategyRequestSendImpl implements Strategy.Request {

    private UncheckedIOWriter writer;
    private HttpRequest request;

    @Override
    public void initialize(Client client, HttpRequest request) {
        this.writer = new UncheckedIOWriter(client.getOutputStream());
        this.request = request;
    }

    @Override
    public void execute() {
        StringBuilder builder = new StringBuilder();
        builder.append(request.getRequestType()).append(" ");
        builder.append(request.getRequestURI()).append(" ");
        builder.append(request.getProtocol());
        this.writer.writeLine(builder.toString());
        this.writer.flush();
    }
}
